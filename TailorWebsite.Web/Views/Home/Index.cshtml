@model TailorWebsite.ViewModels.VM.HomePageViewModel

@{
    ViewData["Title"] = "Pracownia Krawiecka";
}


<section class="position-relative overflow-hidden rounded-4 text-white hero-section dark-blue">
    <div class="hero-overlay position-absolute top-200 start-200 w-100 h-100"></div>
    <div class="container position-relative py-5">
        <div class="row align-items-center py-4">
            <div class="col-lg-6">
                <h1 class="display-5 fw-bold mb-3">Indywidualne szycie na miarę</h1>
                <p class="lead mb-4">Zamów unikalne projekty dopasowane do Twojego stylu: suknie, garnitury, poprawki i więcej.</p>
                <a asp-controller="Services" asp-action="Index" class="btn btn-gold  btn-lg me-2">Nasze usługi</a>
                @if (User?.Identity?.IsAuthenticated ?? false)
                {
                    <a asp-controller="Orders" asp-action="Create" class="btn btn-outline-light btn-lg">Złóż zamówienie</a>
                }
                else
                {
                    var returnUrl = Url.Action("Create", "Orders");
                    <a asp-area="Identity" asp-page="/Account/Login" asp-route-returnUrl="@returnUrl" class="btn btn-outline-light btn-lg">Złóż zamówienie</a>
                }
            </div>
        </div>
    </div>
</section>


<section class="py-4 rounded-4 gold" id="opinion" style="scroll-margin-top: 40px; ">
    <div class="container">
        <div class="text-center mb-4">
            <h2 class="fw-semibold">Opinie klientów</h2>
        </div>
        <div class="row g-4">
            @if ((Model?.Reviews?.Count ?? 0) > 0)
            {
                foreach (var review in Model!.Reviews)
                {
                    <div class="col-md-4">
                        <div class="card h-100 shadow-sm border-0 testimonial-tile">
                            <div class="card-body d-flex flex-column">
                                @{
                                    var parts = review.UserFullName!.Trim().Split(' ', StringSplitOptions.RemoveEmptyEntries);
                                    var displayName = parts.Length == 1
                                        ? parts[0]
                                        : $"{parts[0]} {char.ToUpperInvariant(parts[^1][0])}.";
                                }
                                <div class="small text-warning fw-semibold mb-2">Ocena: @review.Rating/5</div>
                                <p class="small mb-3">"@review.Comment"</p>
                                <div class="mt-auto small text-muted d-flex justify-content-between">
                                    <span>@displayName</span>
                                    <span>@review.ReviewDate.ToString("dd.MM.yyyy")</span>
                                </div>
                            </div>
                        </div>
                    </div>
                }
            }
            else
            {
                <div class="col-12">
                    <div class="alert alert-light text-center mb-0">
                        Brak opinii do wyświetlenia.
                    </div>
                </div>
            }
        </div>
    </div>
</section>

<section class="py-5 rounded-4 dark-blue" id="servives" style="scroll-margin-top: 10px; ">
    <div class="container">
        <div class="text-center mb-5">
            <h2 class="fw-semibold">Popularne usługi</h2>
        </div>
        <div class="row g-4">
            @if ((Model?.PopularServices?.Count ?? 0) > 0)
            {
                foreach (var service in Model!.PopularServices)
                {
                    <div class="col-md-4">
                        <div class="service-card card h-100 border-0 shadow-sm">
                            <div class="card-body d-flex flex-column">
                                <div class="d-flex justify-content-between align-items-center mb-2">
                                    <h5 class="card-title mb-0">@service.Name</h5>
                                  
                                </div>
                              
                                <div class="mt-auto pt-2">
                                    @if (User?.Identity?.IsAuthenticated ?? false)
                                    {
                                        <a asp-controller="Orders" asp-action="Create" asp-route-serviceId="@service.ServiceId" class="btn btn-sm btn-gold w-100">Zamów usługę</a>
                                    }
                                    else
                                    {
                                        var returnUrl = Url.Action("Create", "Orders", new { serviceId = service.ServiceId });
                                        <a asp-area="Identity" asp-page="/Account/Login" asp-route-returnUrl="@returnUrl" class="btn btn-sm btn-gold w-100">Zamów usługę</a>
                                    }
                                </div>
                            </div>
                        </div>
                    </div>
                }
            }
            else
            {
                <div class="col-12">
                    <div class="alert alert-light text-center mb-0">
                        Brak danych o popularnych usługach.
                    </div>
                </div>
            }
        </div>
    </div>
</section>

<section id="about" class="section-padding about-section rounded-4 gold" id="about" >
        <div class="container">
            <div class="row align-items-center">
                <div class="col-lg-6 mb-4 mb-lg-0">
                    <img src="https://images.unsplash.com/photo-1556905055-8f358a7a47b2?ixlib=rb-4.0.3&auto=format&fit=crop&w=1000&q=80" alt="Wnętrze zakładu krawieckiego" class="img-fluid rounded shadow">
                </div>
                <div class="col-lg-6 about-text ps-lg-5">
                    <h2 class="mb-4">O Naszym Zakładzie</h2>
                    <p>Nasza pracownia krawiecka to miejsce z duszą i wieloletnią tradycją. Łączymy klasyczne rzemiosło z nowoczesnymi trendami w modzie. </p>
                    <p>W naszym zakładzie każdy klient traktowany jest wyjątkowo. Oferujemy szeroki wybór tkanin premium oraz profesjonalne doradztwo stylistyczne. Niezależnie od tego, czy potrzebujesz drobnej poprawki, czy szycia miarowego – jesteśmy do Twojej dyspozycji.</p>
                    
                    <hr class="border-light my-4">
                    
                    <h4>Dane kontaktowe</h4>
                    <p class="mb-1"><i class="bi bi-telephone-fill text-warning me-2"></i> +48 123 456 789</p>
                    <p class="mb-1"><i class="bi bi-envelope-fill text-warning me-2"></i> kontakt@uslugikrawieckie.pl</p>
                    <p class="mb-1"><i class="bi bi-geo-alt-fill text-warning me-2"></i> ul. Krawiecka 15, 00-001 Warszawa</p>
                    <p class="mt-3 small text-white-50">Zapraszamy od poniedziałku do piątku w godzinach 9:00 - 17:00</p>
                </div>
            </div>
        </div>
    </section>


